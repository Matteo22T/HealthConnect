<div class="login-page">
  <div class="login-container">
    <div class="login-card">
      <div class="logo">Health<span>Connect</span></div>

      <div class="login-header">
        <h1>Crea il tuo account</h1>
        <p>Registrati per iniziare a utilizzare i nostri servizi</p>
      </div>

      <form class="login-form" [formGroup]="registerForm" (ngSubmit)="onSubmit()">

        <!-- Selezione Ruolo -->
        <div class="form-group">
          <label for="ruolo">Tipo di Account</label>
          <div class="input-wrapper">
            <span class="input-icon">üë§</span>
            <select id="ruolo" formControlName="ruolo" class="form-select">
              <option value="PAZIENTE">Paziente</option>
              <option value="MEDICO">Medico</option>
            </select>
          </div>
        </div>

        <!-- Nome e Cognome -->
        <div class="form-row">
          <div class="form-group">
            <label for="nome">Nome</label>
            <div class="input-wrapper">
              <span class="input-icon">üë®</span>
              <input
                type="text"
                id="nome"
                formControlName="nome"
                placeholder="Mario"
                [class.error]="registerForm.get('nome')?.invalid && registerForm.get('nome')?.touched">
            </div>
            <span class="field-error" *ngIf="registerForm.get('nome')?.invalid && registerForm.get('nome')?.touched">
              Il nome √® obbligatorio
            </span>
          </div>

          <div class="form-group">
            <label for="cognome">Cognome</label>
            <div class="input-wrapper">
              <span class="input-icon">üë®</span>
              <input
                type="text"
                id="cognome"
                formControlName="cognome"
                placeholder="Rossi"
                [class.error]="registerForm.get('cognome')?.invalid && registerForm.get('cognome')?.touched">
            </div>
            <span class="field-error" *ngIf="registerForm.get('cognome')?.invalid && registerForm.get('cognome')?.touched">
              Il cognome √® obbligatorio
            </span>
          </div>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email">Email</label>
          <div class="input-wrapper">
            <span class="input-icon">üìß</span>
            <input
              type="email"
              id="email"
              formControlName="email"
              placeholder="tuo@email.com"
              [class.error]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
          </div>
          <span class="field-error" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
            <span *ngIf="registerForm.get('email')?.errors?.['required']">L'email √® obbligatoria</span>
            <span *ngIf="registerForm.get('email')?.errors?.['email']">Email non valida</span>
          </span>
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <div class="input-wrapper">
            <span class="input-icon">üîí</span>
            <input
              type="password"
              id="password"
              formControlName="password"
              placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
              [class.error]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
          </div>

          <span class="field-error" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
            <span *ngIf="registerForm.get('password')?.errors?.['required']">La password √® obbligatoria</span>
            <div *ngIf="registerForm.get('password')?.errors?.['pattern']" class="password-requirements">
            <p>La password deve contenere:</p>
            <ul>
              <li>Almeno 8 caratteri</li>
              <li>Una lettera <strong>maiuscola</strong> e una <strong>minuscola</strong></li>
              <li>Un <strong>numero</strong></li>
              <li>Un carattere <strong>speciale</strong> (@ $ ! % * ? &)</li>
            </ul>
          </div>
          </span>
        </div>



        <!-- Telefono -->
        <div class="form-group">
          <label for="telefono">Telefono</label>
          <div class="input-wrapper">
            <span class="input-icon">üì±</span>
            <input
              type="tel"
              id="telefono"
              formControlName="telefono"
              placeholder="3331234567"
              [class.error]="registerForm.get('telefono')?.invalid && registerForm.get('telefono')?.touched">
          </div>
          <span class="field-error" *ngIf="registerForm.get('telefono')?.invalid && registerForm.get('telefono')?.touched">
            <span *ngIf="registerForm.get('telefono')?.errors?.['required']">Il telefono √® obbligatorio</span>
            <span *ngIf="registerForm.get('telefono')?.errors?.['pattern']">Solo numeri</span>
          </span>
        </div>

        <!-- Data di Nascita e Sesso -->
        <div class="form-row">
          <div class="form-group">
            <label for="dataNascita">Data di Nascita</label>
            <div class="input-wrapper">
              <span class="input-icon">üìÖ</span>
              <input
                type="date"
                id="dataNascita"
                formControlName="dataNascita"
                [class.error]="registerForm.get('dataNascita')?.invalid && registerForm.get('dataNascita')?.touched">
            </div>
            <span class="field-error" *ngIf="registerForm.get('dataNascita')?.invalid && registerForm.get('dataNascita')?.touched">
              Et√† minima richiesta: 18 anni.
            </span>
          </div>

          <div class="form-group">
            <label for="sesso">Sesso</label>
            <div class="input-wrapper">
              <span class="input-icon">‚ö•</span>
              <select
                id="sesso"
                formControlName="sesso"
                class="form-select"
                [class.error]="registerForm.get('sesso')?.invalid && registerForm.get('sesso')?.touched">
                <option value="">Seleziona</option>
                <option value="M">Maschio</option>
                <option value="F">Femmina</option>
                <option value="N">Altro</option>
              </select>
            </div>
            <span class="field-error" *ngIf="registerForm.get('sesso')?.invalid && registerForm.get('sesso')?.touched">
              Obbligatorio
            </span>
          </div>
        </div>

        <!-- Campi Medico -->
        <div *ngIf="isMedico" class="medico-section">
          <div class="section-divider">
            <span>Dati Professionali</span>
          </div>

          <div class="form-group">
            <label for="specializzazione_id">Specializzazione</label>
            <div class="input-wrapper">
              <span class="input-icon">üè•</span>
              <select
                id="specializzazione_id"
                formControlName="specializzazione_id"
                class="form-select"
                [class.error]="registerForm.get('specializzazione_id')?.invalid && registerForm.get('specializzazione_id')?.touched">
                <option *ngFor="let spec of specializzazioni" [ngValue]="spec.id">
                  {{ spec.nome }}
                </option>
              </select>
            </div>
            <span class="field-error" *ngIf="registerForm.get('specializzazione_id')?.invalid && registerForm.get('specializzazione_id')?.touched">
              La specializzazione √® obbligatoria
            </span>
          </div>

          <div class="form-group">
            <label for="numero_albo">Numero Albo</label>
            <div class="input-wrapper">
              <span class="input-icon">üÜî</span>
              <input
                type="text"
                id="numero_albo"
                formControlName="numero_albo"
                placeholder="es. 12345"
                [class.error]="registerForm.get('numero_albo')?.invalid && registerForm.get('numero_albo')?.touched">
            </div>
            <span class="field-error" *ngIf="registerForm.get('numero_albo')?.invalid && registerForm.get('numero_albo')?.touched">
              Il numero di albo √® obbligatorio
            </span>
          </div>

          <div class="form-group">
            <label for="indirizzo_studio">Indirizzo Studio</label>
            <div class="input-wrapper">
              <span class="input-icon">üìç</span>
              <input
                type="text"
                id="indirizzo_studio"
                formControlName="indirizzo_studio"
                placeholder="Via, Numero, Citt√†"
                [class.error]="registerForm.get('indirizzo_studio')?.invalid && registerForm.get('indirizzo_studio')?.touched">
            </div>
            <span class="field-error" *ngIf="registerForm.get('indirizzo_studio')?.invalid && registerForm.get('indirizzo_studio')?.touched">
              L'indirizzo √® obbligatorio
            </span>
          </div>

          <div class="form-group">
            <label for="biografia">Biografia</label>
            <div class="input-wrapper">
              <textarea
                id="biografia"
                formControlName="biografia"
                class="form-textarea"
                rows="3"
                placeholder="Descrivi la tua esperienza..."
                [class.error]="registerForm.get('biografia')?.invalid && registerForm.get('biografia')?.touched"></textarea>
            </div>
            <span class="field-error" *ngIf="registerForm.get('biografia')?.invalid && registerForm.get('biografia')?.touched">
              La biografia √® obbligatoria
            </span>
          </div>

          <div class="info-box">
            ‚ö†Ô∏è Il tuo account sar√† sottoposto ad approvazione
          </div>
        </div>

        <!-- Messaggio Errore -->
        <div class="error-message" *ngIf="errorMessage">
          <span class="error-icon">‚ö†</span>
          {{ errorMessage }}
        </div>

        <!-- Pulsante Submit -->
        <button
          type="submit"
          class="btn-login"
          [disabled]="registerForm.invalid">
          Registrati
        </button>
      </form>

      <div class="login-footer">
        <p>Hai gi√† un account? <a routerLink="/login" class="link-register">Accedi</a></p>
      </div>
    </div>

    <div class="back-home">
      <a class="link-back" routerLink="/">‚Üê Torna alla Home</a>
    </div>
  </div>
</div>
